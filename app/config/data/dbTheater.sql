/*
Database creation.
*/
create database theater_db;

use theater_db;

/*
Tables creation.
*/
create table if not exists genre (
	id int unsigned not null auto_increment,
	genre varchar(255) not null, 
	constraint genre_pk primary key (id),
	constraint genre_unique unique (genre)
) ENGINE=InnoDB;

create table if not exists film (
	id int unsigned not null auto_increment,
	title varchar(255) not null,
	genre_id int unsigned not null,
	constraint film_pk primary key (id),
	constraint film_genre_fk foreign key (genre_id) references genre(id),
	constraint film_unique unique (title)
) ENGINE=InnoDB;

create table if not exists week (
	id int unsigned not null auto_increment,
	numberOfWeek int not null,
	constraint week_pk primary key (id),
	constraint week_unique unique (numberOfWeek),
	constraint week_ck check (numberOfWeek>0 and numberOfWeek<53)
) ENGINE=InnoDB;

create table if not exists schedule (
	id int unsigned not null auto_increment,
	film_id int unsigned not null,
	week_id int unsigned not null,
	constraint schedule_pk primary key (id),
	constraint schedule_film_fk foreign key (film_id) references film(id),
	constraint schedule_week_fk foreign key (week_id) references week(id),
	constraint schedule_unique unique (film_id,week_id)
) ENGINE=InnoDB;

/*
Data insertion.
*/
insert into genre (id,genre) values
(1,'Absurdist/surreal/whimsical'),
(2,'Action'),
(3,'Adventure'),
(4,'Comedy'),
(5,'Crime'),
(6,'Drama'),
(7,'Fantasy'),
(8,'Historical'),
(9,'Historical fiction'),
(10,'Horror'),
(11,'Magical realism'),
(12,'Mystery'),
(13,'Paranoid fiction'),
(14,'Philosophical'),
(15,'Political'),
(16,'Romance'),
(17,'Saga'),
(18,'Satire'),
(19,'Science fiction'),
(20,'Social'),
(21,'Speculative'),
(22,'Thriller'),
(23,'Urban'),
(24,'Western'),
(25,'War'),
(26,'Animation');

insert into film (id,title,genre_id) values
(1,'The Innocents',1),
(2,'Lawrence of Arabia',3),
(3,'The Deer Hunter',25),
(4,'Amadeus',6),
(5,'Blade Runner',22),
(6,'Eyes Wide Shut',12),
(7,'The Usual Suspects',5),
(8,'Chinatown',12),
(9,'Boogie Nights',6),
(10,'Annie Hall',4),
(11,'Princess Mononoke',26),
(12,'The Shawshank Redemption',6),
(13,'American Beauty',22),
(14,'Titanic',6),
(15,'Good Will Hunting',11),
(16,'Deliverance',15),
(17,'Trainspotting',23),
(18,'The Prestige',24),
(19,'Aliens',10),
(20,'Back to the Future',9),
(21,'Slumdog Millionaire',6),
(22,'Donnie Darko',20),
(23,'Seven Samurai',3),
(24,'Spirited Away',26),
(25,'Avatar',22),
(26,'Beyond the Sea',7),
(27,'Braveheart',22),
(28,'Toy Story',26),
(29,'The Godfather',22),
(30,'Schindler\'s List',25),
(31,'Raging Bull',5),
(32,'The Sound of Music',6),
(33,'Love, Actually',7),
(34,'1917',8),
(35,'Gone with the Wind',9),
(36,'Avengers: Infinity War',10),
(37,'Bad Boys For Life',11),
(38,'Serenity',12),
(39,'Rocky',13),
(40,'The Piano',14),
(41,'The Dark Knight',15),
(42,'Superman',16),
(43,'TheLord of the Rings',17),
(44,'Citizen Kane',18),
(45,'The Lion King',19),
(46,'It\'s a Wonderful Life',25),
(47,'Mad Max 2',20),
(48,'Forest Gump',22),
(49,'Frozen II',24),
(50,'Casablanca',21),
(51,'Die Hard',23),
(52,'No Country for Old Men',26);

insert into week (id,numberOfWeek) values
(1,1),
(2,2),
(3,3),
(4,4),
(5,5),
(6,6),
(7,7),
(8,8),
(9,9),
(10,10),
(11,11),
(12,12),
(13,13),
(14,14),
(15,15),
(16,16),
(17,17),
(18,18),
(19,19),
(20,20),
(21,21),
(22,22),
(23,23),
(24,24),
(25,25),
(26,26),
(27,27),
(28,28),
(29,29),
(30,30),
(31,31),
(32,32),
(33,33),
(34,34),
(35,35),
(36,36),
(37,37),
(38,38),
(39,39),
(40,40),
(41,41),
(42,42),
(43,43),
(44,44),
(45,45),
(46,46),
(47,47),
(48,48),
(49,49),
(50,50),
(51,51),
(52,52);

insert into schedule (id,film_id,week_id) values
(1,3,1),
(2,4,2),
(3,6,3),
(4,5,5),
(5,2,4),
(6,10,6),
(7,11,8),
(8,12,10),
(9,13,9),
(10,15,12),
(11,18,15),
(12,19,16),
(13,20,17),
(14,21,18),
(15,22,19),
(16,23,20),
(17,24,21),
(18,25,22),
(19,1,23),
(20,26,7),
(21,27,24),
(22,28,25),
(23,17,11),
(24,16,13),
(25,14,14),
(26,7,26),
(27,8,27),
(28,9,28),
(29,52,29),
(30,51,30),
(31,50,31),
(32,49,32),
(33,48,33),
(34,47,34),
(35,45,35),
(36,46,36),
(37,44,37),
(38,43,38),
(39,42,39),
(40,41,40),
(41,40,41),
(42,38,42),
(43,37,43),
(44,36,44),
(45,35,45),
(46,34,46),
(47,33,47),
(48,32,48),
(49,39,49),
(50,31,50),
(51,30,51),
(52,29,52);
